<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux on Yui's Blog</title><link>https://yuiofastora.github.io/tags/linux/</link><description>Recent content in Linux on Yui's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 26 Jan 2023 19:00:47 +0800</lastBuildDate><atom:link href="https://yuiofastora.github.io/tags/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>Self Hosting A Bookmark Manager</title><link>https://yuiofastora.github.io/p/self-hosting-a-bookmark-manager/</link><pubDate>Thu, 26 Jan 2023 19:00:47 +0800</pubDate><guid>https://yuiofastora.github.io/p/self-hosting-a-bookmark-manager/</guid><description>&lt;p>Self host a bookmark manager with docker.&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://github.com/sissbruecker/linkding" target="_blank" rel="noopener"
>https://github.com/sissbruecker/linkding&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h2 id="setup-with-docker">
&lt;a href="#setup-with-docker">#&lt;/a>
Setup with Docker
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run -d \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --name linkding \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -p 9090:9090 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v {host-data-folder}:/etc/linkding/data \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sissbruecker/linkding:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Setup user&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker exec -it linkding python manage.py createsuperuser --username=joe --email=joe@example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Setup Reverse Proxy with Nginx
Add&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">location /linkding {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host $host;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-Proto $scheme;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>to config&lt;/p></description></item><item><title>WSL2 Setup</title><link>https://yuiofastora.github.io/p/wsl2-setup/</link><pubDate>Thu, 26 Jan 2023 19:00:47 +0800</pubDate><guid>https://yuiofastora.github.io/p/wsl2-setup/</guid><description>&lt;h2 id="update-windows-11">
&lt;a href="#update-windows-11">#&lt;/a>
Update windows 11
&lt;/h2>&lt;h2 id="update-gpu-driver">
&lt;a href="#update-gpu-driver">#&lt;/a>
Update GPU Driver
&lt;/h2>&lt;h2 id="fresh-install">
&lt;a href="#fresh-install">#&lt;/a>
Fresh Install
&lt;/h2>&lt;p>Run powershell as Administrator&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wsl&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="n">-install&lt;/span> &lt;span class="n">-d&lt;/span> &lt;span class="n">Ubuntu&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Get other distros from MS store&lt;/p>
&lt;h2 id="install-apps">
&lt;a href="#install-apps">#&lt;/a>
Install apps
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo apt install gedit -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install gimp -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># File Browser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install nautilus -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install x11-apps -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>To install the Google Chrome for Linux:&lt;/p>
&lt;ol>
&lt;li>Change directories into the temp folder: &lt;code>cd /tmp&lt;/code>&lt;/li>
&lt;li>Use wget to download it: &lt;code>sudo wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb&lt;/code>&lt;/li>
&lt;li>Get the current stable version: &lt;code>sudo dpkg -i google-chrome-stable_current_amd64.deb&lt;/code>&lt;/li>
&lt;li>Fix the package: &lt;code>sudo apt install --fix-broken -y&lt;/code>&lt;/li>
&lt;li>Configure the package: &lt;code>sudo dpkg -i google-chrome-stable_current_amd64.deb&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>To launch, enter: &lt;code>google-chrome&lt;/code>&lt;/p>
&lt;h2 id="set-proxy">
&lt;a href="#set-proxy">#&lt;/a>
Set Proxy
&lt;/h2>&lt;p>Use &lt;a class="link" href="https://www.telerik.com/fiddler/fiddler-classic" target="_blank" rel="noopener"
>Fiddler Classic&lt;/a> winconfig to remove Appcontainer network traffic block&lt;/p>
&lt;p>Check IP Address with:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">cat /etc/resolv.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>run proxy software on windows (set &amp;lsquo;Allow LAN&amp;rsquo;)&lt;/p>
&lt;p>&lt;a class="link" href="https://help.ubuntu.com/community/AptGet/Howto#Setting_up_apt-get_to_use_a_http-proxy" target="_blank" rel="noopener"
>https://help.ubuntu.com/community/AptGet/Howto#Setting_up_apt-get_to_use_a_http-proxy&lt;/a>&lt;/p>
&lt;p>execute in WSL&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">http_proxy&lt;/span>&lt;span class="o">=&lt;/span>http://IPaddress:proxyport
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>or use proxychains&lt;/p>
&lt;h2 id="beautify-windows-terminal">
&lt;a href="#beautify-windows-terminal">#&lt;/a>
Beautify Windows Terminal
&lt;/h2>&lt;p>&lt;a class="link" href="https://youtu.be/VT2L1SXFq9U" target="_blank" rel="noopener"
>https://youtu.be/VT2L1SXFq9U&lt;/a>&lt;/p>
&lt;h2 id="fix-process-exited-with-code-4294967295">
&lt;a href="#fix-process-exited-with-code-4294967295">#&lt;/a>
Fix [process exited with code 4294967295]
&lt;/h2>&lt;p>Network issues (VPN)&lt;/p>
&lt;p>run command to reset windows network&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">netsh&lt;/span> &lt;span class="n">winsock&lt;/span> &lt;span class="n">reset&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Restart windows&lt;/p>
&lt;h2 id="fix-display-not-open--gui-not-workinghttpsgithubcommicrosoftwslissues4106issuecomment-876470388">
&lt;a href="#fix-display-not-open--gui-not-workinghttpsgithubcommicrosoftwslissues4106issuecomment-876470388">#&lt;/a>
&lt;a class="link" href="https://github.com/microsoft/WSL/issues/4106#issuecomment-876470388" target="_blank" rel="noopener"
>Fix Display not open / GUI not working&lt;/a>
&lt;/h2>&lt;h3 id="setting-the-display-variable-for-wsl2">
&lt;a href="#setting-the-display-variable-for-wsl2">#&lt;/a>
Setting the DISPLAY variable for WSL2
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">DISPLAY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>route.exe print &lt;span class="p">|&lt;/span> grep 0.0.0.0 &lt;span class="p">|&lt;/span> head -1 &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $4}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>:0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>also put in &lt;code>~/.bashrc&lt;/code>&lt;/p>
&lt;h3 id="install-vcxsrvhttpssourceforgenetprojectsvcxsrv-on-windows">
&lt;a href="#install-vcxsrvhttpssourceforgenetprojectsvcxsrv-on-windows">#&lt;/a>
Install &lt;a class="link" href="https://sourceforge.net/projects/vcxsrv/" target="_blank" rel="noopener"
>vcxsrv&lt;/a> on Windows
&lt;/h3>&lt;h3 id="start-xlaunch-on-windows">
&lt;a href="#start-xlaunch-on-windows">#&lt;/a>
Start XLaunch on Windows
&lt;/h3>&lt;p>find shortcut, right lick and select properties&lt;/p>
&lt;p>Append &lt;code>-ac&lt;/code> after target path&lt;/p>
&lt;p>launch via edited shortcut&lt;/p>
&lt;ul>
&lt;li>Select Multiple Windows (default)&lt;/li>
&lt;li>Select Start no client (default)&lt;/li>
&lt;li>&lt;strong>Check✅ Disable access control&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Uncheck ☐ Native opengl&lt;/strong>&lt;/li>
&lt;li>Save configuration on startup folder, location &lt;code>C:\Users\&amp;quot;YOUR_USERNAME&amp;quot;\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>All set&lt;/p>
&lt;p>Launch GUI apps on WSL.&lt;/p></description></item><item><title>Install ZSH</title><link>https://yuiofastora.github.io/p/install-zsh/</link><pubDate>Thu, 26 Jan 2023 18:52:00 +0800</pubDate><guid>https://yuiofastora.github.io/p/install-zsh/</guid><description>&lt;p>Install ZSH and customzie theme&lt;/p>
&lt;p>Tested env: Kubuntu 20.04&lt;/p>
&lt;h2 id="install-zsh">
&lt;a href="#install-zsh">#&lt;/a>
Install ZSH
&lt;/h2>&lt;p>&lt;code>$ sudo apt-get install zsh&lt;/code>&lt;/p>
&lt;p>change default shell to zsh&lt;/p>
&lt;p>&lt;code>$ chsh -s $(which zsh)&lt;/code>&lt;/p>
&lt;p>log out the current user and log back in to take effect&lt;/p>
&lt;h2 id="install-oh-my-zsh">
&lt;a href="#install-oh-my-zsh">#&lt;/a>
Install oh-my-zsh
&lt;/h2>&lt;p>&lt;code>$ wget https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh&lt;/code>&lt;/p>
&lt;p>&lt;code>sh install.sh&lt;/code>&lt;/p>
&lt;h2 id="install-powerlevel10k-theme">
&lt;a href="#install-powerlevel10k-theme">#&lt;/a>
Install powerlevel10k theme
&lt;/h2>&lt;p>Install Meslo Nerd Font&lt;/p>
&lt;p>Clone file from github and add to zshrc&lt;/p>
&lt;p>&lt;code>$ git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k&lt;/code>&lt;/p>
&lt;p>Set &lt;code>ZSH_THEME=&amp;quot;powerlevel10k/powerlevel10k&amp;quot;&lt;/code> in &lt;code>~/.zshrc&lt;/code>.&lt;/p>
&lt;p>&lt;code>$ source .zshrc&lt;/code>&lt;/p>
&lt;h2 id="plugins-for-oh-my-zsh">
&lt;a href="#plugins-for-oh-my-zsh">#&lt;/a>
Plugins for oh-my-zsh
&lt;/h2>&lt;p>&lt;code>extract&lt;/code> Uncompress tool&lt;/p>
&lt;p>&lt;code>z&lt;/code> jump to frequently used directories&lt;/p>
&lt;p>&lt;code>colored-man-pages&lt;/code> Colorful man pages&lt;/p>
&lt;p>&lt;code>sudo&lt;/code> Press ESC twice to add sudo for last command&lt;/p>
&lt;p>&lt;code>zsh-syntax-highlighting&lt;/code>&lt;/p>
&lt;p>&lt;code>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting&lt;/code>&lt;/p>
&lt;p>Set &lt;code>plugins=(zsh-syntax-highlighting)&lt;/code> in &lt;code>~/.zshrc&lt;/code>&lt;/p>
&lt;p>&lt;code>zsh-autosuggestions&lt;/code>&lt;/p>
&lt;p>&lt;code>git clone https://github.com/zsh-users/zsh-autosuggestions.git $ZSH_CUSTOM/plugins/zsh-autosuggestions&lt;/code>&lt;/p>
&lt;p>Set &lt;code>plugins=(zsh-autosuggestions)&lt;/code> in &lt;code>~/.zshrc&lt;/code>&lt;/p></description></item><item><title>Delete apt GPG key</title><link>https://yuiofastora.github.io/p/delete-apt-gpg-key/</link><pubDate>Thu, 26 Jan 2023 18:50:00 +0800</pubDate><guid>https://yuiofastora.github.io/p/delete-apt-gpg-key/</guid><description>&lt;p>Delete GPG keys with &lt;code>apt-key&lt;/code>&lt;/p>
&lt;p>Tested env: Ubuntu 20.04&lt;/p>
&lt;h2 id="list-all-gpg-keys">
&lt;a href="#list-all-gpg-keys">#&lt;/a>
List all GPG keys
&lt;/h2>&lt;p>&lt;code>$ sudo apt-key list&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yui@yui-kubuntu:~$ sudo apt-key list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa2048 2016-09-25 [SC]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4AC4 41BE 68B4 ADAB 7439 FBF9 BA30 0B77 55AF CFAE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid [ unknown] Abner Lee &amp;lt;abner@typora.io&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg.d/danielrichter2007-ubuntu-grub-customizer.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa1024 2010-10-08 [SC]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 59DA D276 B942 642B 1BBD 0EAC A8AA 1FAA 3F05 5C03
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid [ unknown] Launchpad PPA for Daniel Richter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg.d/google-chrome.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa4096 2016-04-12 [SC]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> EB4C 1BFD 4F04 2F6D DDCC EC91 7721 F63B D38B 4796
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid [ unknown] Google Inc. (Linux Packages Signing Authority) &amp;lt;linux-packages-keymaster@google.com&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sub rsa4096 2021-10-26 [S] [expires: 2024-10-25]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg.d/microsoft.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa2048 2015-10-28 [SC]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> BC52 8686 B50D 79E3 39D3 721C EB3E 94AD BE12 29CF
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid [ unknown] Microsoft (Release signing) &amp;lt;gpgsecurity@microsoft.com&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg.d/steam.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa2048 2012-12-07 [SC]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> BA18 16EF 8E75 005F CF5E 27A1 F24A EA9F B054 98B7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid [ unknown] Valve Corporation &amp;lt;linux@steampowered.com&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sub rsa2048 2012-12-07 [E]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg.d/ubuntu-keyring-2012-cdimage.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa4096 2012-05-11 [SC]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 8439 38DF 228D 22F7 B374 2BC0 D94A A3F0 EFE2 1092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid [ unknown] Ubuntu CD Image Automatic Signing Key (2012) &amp;lt;cdimage@ubuntu.com&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg.d/ubuntu-keyring-2018-archive.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa4096 2018-09-17 [SC]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> F6EC B376 2474 EDA9 D21B 7022 8719 20D1 991B C93C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid [ unknown] Ubuntu Archive Automatic Signing Key (2018) &amp;lt;ftpmaster@ubuntu.com&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="delete-entry">
&lt;a href="#delete-entry">#&lt;/a>
Delete entry
&lt;/h2>&lt;p>Delete entry in /etc/apt/sources.list.d/&lt;/p>
&lt;h2 id="delete-keys">
&lt;a href="#delete-keys">#&lt;/a>
Delete keys
&lt;/h2>&lt;p>remove typora.io&lt;/p>
&lt;p>&lt;code>$ sudo apt-key del &amp;quot;4AC4 41BE 68B4 ADAB 7439 FBF9 BA30 0B77 55AF CFAE&amp;quot;&lt;/code>&lt;/p>
&lt;p>or use the last 8 chars&lt;/p>
&lt;p>&lt;code>$ sudo apt-key del 55AFCFAE&lt;/code>&lt;/p>
&lt;p>&lt;code>$ sudo apt update&lt;/code>&lt;/p></description></item><item><title>Basic Server Security Enforcing</title><link>https://yuiofastora.github.io/p/basic-server-security-enforcing/</link><pubDate>Thu, 26 Jan 2023 18:46:00 +0800</pubDate><guid>https://yuiofastora.github.io/p/basic-server-security-enforcing/</guid><description>&lt;p>Enforing server security with disabling root login, adding ssh key authentication, setup 2FA.&lt;/p>
&lt;p>Tested env: Ubuntu 20.04&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/midoks/mdserver-web" target="_blank" rel="noopener"
>https://github.com/midoks/mdserver-web&lt;/a>&lt;/p>
&lt;h2 id="add-a-new-user-with-super-privileges">
&lt;a href="#add-a-new-user-with-super-privileges">#&lt;/a>
Add a new user with super privileges
&lt;/h2>&lt;h3 id="create-a-new-user-and-add-home-directory">
&lt;a href="#create-a-new-user-and-add-home-directory">#&lt;/a>
Create a new user and add home directory
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ useradd username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ mkdir /home/username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ mkdir /home/username/.ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ chmod 700 /home/username/.ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#Set shell of new user to bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ usermod -s /bin/bash username
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="use-ssh-key-for-authentication">
&lt;a href="#use-ssh-key-for-authentication">#&lt;/a>
Use SSH key for authentication
&lt;/h3>&lt;p>Generate SSH key&lt;/p>
&lt;p>Use &lt;code>$ ssh-keygen&lt;/code> or tools&lt;/p>
&lt;p>&lt;code>ssh-keygen -t rsa -m PEM -b 4096 -C &amp;quot;azureuser@myserver&amp;quot;&lt;/code>&lt;/p>
&lt;p>Copy the content of generated ssh public key to server&lt;/p>
&lt;p>&lt;code>$ echo 'public_key_string' &amp;gt;&amp;gt; /home/username/.ssh/authorized_keys&lt;/code>&lt;/p>
&lt;p>Set permissions&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Set files permissions to owner read only
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ chmod 400 /home/username/.ssh/authorized_keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ chown username:username /home/username -R
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Try to login with new user&lt;/p>
&lt;p>Set password of new user&lt;/p>
&lt;p>&lt;code>$ passwd username&lt;/code>&lt;/p>
&lt;p>Edit sudo&lt;/p>
&lt;p>&lt;code>$ visudo&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#Make sure there is sudo group
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">%sudo ALL=(ALL:ALL) ALL
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Add new user to sudo group&lt;/p>
&lt;p>&lt;code>$ usermod -aG sudo username&lt;/code>&lt;/p>
&lt;p>Logout and relogin to take effects&lt;/p>
&lt;p>Set only SSH key authentication&lt;/p>
&lt;p>&lt;code>$ nano /etc/ssh/sshd_config&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Disable root user login
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PermitRootLogin no
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Disable password authentication login
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PasswordAuthentication no
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AllowUsers username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Only alow IPV4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AddressFamily inet
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">AllowUsers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This keyword can be followed by a list of user name patterns, separated by spaces. If specified, login is allowed only for user names that match one of the patterns. Only user names are valid; a numerical user ID is not recognized. By default, login is allowed for all users.If the pattern takes the form USER@HOST then USER and HOST are separately checked, restricting logins to particular users from particular hosts. HOST criteria may additionally contain addresses to match in CIDR address/masklen format. The allow/deny users directives are processed in the following order: DenyUsers,AllowUsers.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://man7.org/linux/man-pages/man5/sshd_config.5.html#:~:text=AllowUsers%20This%20keyword%20can%20be,is%20allowed%20for%20all%20users.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;p>Restart ssh service
&lt;code>$ service ssh restart&lt;/code>&lt;/p>
&lt;h2 id="set-2fa">
&lt;a href="#set-2fa">#&lt;/a>
Set 2FA
&lt;/h2>&lt;blockquote>
&lt;p>&lt;a class="link" href="https://s.yuiofastora.com/pRxZA" target="_blank" rel="noopener"
>https://s.yuiofastora.com/pRxZA&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>Install Google Pluggable Authentication Module (PAM)&lt;/p>
&lt;p>&lt;code>$ sudo apt install libpam-google-authenticator&lt;/code>&lt;/p>
&lt;p>Start the setup&lt;/p>
&lt;p>&lt;code>$ google-authenticator&lt;/code>&lt;/p>
&lt;p>Restart the server&lt;/p>
&lt;p>Edit PAM config&lt;/p>
&lt;p>&lt;code>$ sudo nano /etc/pam.d/sshd&lt;/code>&lt;/p>
&lt;p>Add the following line to the bottom of the file&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">. . .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Standard Un*x password updating.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@include common-password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth required pam_google_authenticator.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth required pam_permit.so
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Edit SSH config&lt;/p>
&lt;p>&lt;code>$ nano /etc/ssh/sshd_config&lt;/code>&lt;/p>
&lt;p>Set &lt;code>ChallengeResponseAuthentication&lt;/code> to &lt;code>yes&lt;/code>&lt;/p>
&lt;p>Also add line&lt;/p>
&lt;p>&lt;code>AuthenticationMethods publickey,password publickey,keyboard-interactive&lt;/code>&lt;/p>
&lt;p>Edit PAM config again&lt;/p>
&lt;p>&lt;code>$ sudo nano /etc/pam.d/sshd&lt;/code>&lt;/p>
&lt;p>Comment out &lt;code>@include common-auth&lt;/code>&lt;/p>
&lt;p>Restart SSHD service&lt;/p>
&lt;p>&lt;code>$ sudo systemctl restart sshd.service&lt;/code>&lt;/p></description></item></channel></rss>